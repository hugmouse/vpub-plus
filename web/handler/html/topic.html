{{ define "breadcrumb" }}<a href="/">boards</a> > <a href="/boards/{{ .board.Id }}">{{ .board.Name }}</a>{{ end }}
{{ define "content"}}
<h1><a href="/">boards</a> > <a href="/boards/{{ .board.Id }}">{{ .board.Name }}</a></h1>

{{ range .posts }}
<article id="{{ .Id }}">
    <header>
        {{ .User.Name }}
        {{ timeAgo .CreatedAt }}
    </header>
    <div>
        {{ if eq $.topic.Id .Id }}<h1>{{ .Subject }}</h1>{{ end }}
        {{ gmi2html .Content }}
        {{ if or (hasPermission .User.Name) $.logged.IsAdmin }}
        <p><a href="/posts/{{ .Id }}/edit">edit</a> <a href="/posts/{{ .Id }}/remove">remove</a></p>
        {{ end }}
    </div>
</article>
{{ end }}

<!--<table class="posts">-->
<!--    {{ range .posts }}-->
<!--    <tr class="post" id="{{ .Id }}">-->
<!--        <td class="post-aside">-->
<!--            <p>{{ .User.Name }}</p>-->
<!--            {{ if .User.Picture }}-->
<!--            <img width="100" src="{{ .User.Picture }}">-->
<!--            {{ end }}-->
<!--            <p>{{ timeAgo .CreatedAt }}</p>-->
<!--        </td>-->
<!--        <td class="post-content">-->
<!--            {{ if eq $.topic.Id .Id }}<h1>{{ .Subject }}</h1>{{ end }}-->
<!--            {{ gmi2html .Content }}-->
<!--            {{ if or (hasPermission .User.Name) $.logged.IsAdmin}}-->
<!--            <p><a href="/posts/{{ .Id }}/edit">edit</a> <a href="/posts/{{ .Id }}/remove">remove</a></p>-->
<!--            {{ end }}-->
<!--        </td>-->
<!--    </tr>-->
<!--    {{ end }}-->
<!--</table>-->
{{ if not .topic.IsLocked }}
<section style="margin-top: 1em;">
    <form action="/posts/save" method="post">
        {{ .csrfField }}
        <input type="hidden" name="topicId" value="{{ .topic.Id }}">
        <input type="hidden" name="boardId" value="{{ .board.Id }}">
        <input type="hidden" name="subject" value="Re: {{ .topic.Subject }}">
        <div class="field">
            <label for="content">Reply to this topic</label>
            <textarea name="content" id="content" style="height: 150px;"></textarea>
        </div>
        <input type="submit" value="Reply">
    </form>
</section>
{{ end }}
{{ end }}