{{ define "breadcrumb" }}<a href="/">boards</a> > <a href="/boards/{{ .board.Id }}">{{ .board.Name }}</a>{{ end }}
{{ define "content"}}
<h1><a href="/">boards</a> > <a href="/boards/{{ .board.Id }}">{{ .board.Name }}</a></h1>

<table class="posts">
    {{ range .posts }}
    <tr class="post" id="{{ .Id }}">
        <td class="post-aside">
            <p>{{ .User.Name }}</p>
            {{ if .User.Picture }}
            <img width="100" src="{{ .User.Picture }}">
            {{ end }}
            <p>{{ timeAgo .CreatedAt }}</p>
        </td>
        <td class="post-content">
            {{ if eq $.topic.Id .Id }}<h1>{{ .Title }}</h1>{{ end }}
            {{ gmi2html .Content }}
            {{ if or (hasPermission .User.Name) $.logged.IsAdmin}}
            <p><a href="/posts/{{ .Id }}/edit">edit</a> <a href="/posts/{{ .Id }}/remove">remove</a></p>
            {{ end }}
        </td>
    </tr>
    {{ end }}
<!--    <tr class="post">-->
<!--        <td class="post-aside">-->
<!--            <p>{{ .logged.Name }}</p>-->
<!--            {{ if .logged.Picture }}-->
<!--            <img width="100" src="{{ .logged.Picture }}">-->
<!--            {{ end }}-->
<!--        </td>-->
<!--        <td class="post-content">-->
<!--            <form action="/posts/save" method="post">-->
<!--                {{ .csrfField }}-->
<!--                <input type="hidden" name="topicId" value="{{ .topic.Id }}">-->
<!--                <input type="hidden" name="subject" value="Re: {{ .topic.Subject }}">-->
<!--                <div class="field">-->
<!--                    <label for="content">Reply to this topic</label>-->
<!--                    <textarea name="content" id="content" style="height: 150px;"></textarea>-->
<!--                </div>-->
<!--                <input type="submit" value="Reply">-->
<!--            </form>-->
<!--        </td>-->
<!--    </tr>-->
</table>
<section style="margin-top: 1em;">
    <form action="/posts/save" method="post">
        {{ .csrfField }}
        <input type="hidden" name="topicId" value="{{ .topic.Id }}">
        <input type="hidden" name="boardId" value="{{ .board.Id }}">
        <input type="hidden" name="subject" value="Re: {{ .topic.Subject }}">
        <div class="field">
            <label for="content">Reply to this topic</label>
            <textarea name="content" id="content" style="height: 150px;"></textarea>
        </div>
        <input type="submit" value="Reply">
    </form>
</section>
{{ end }}